{% extends "base.html" %}
{% block title %}Video Game API{% endblock %}
{% block content %}
<div class="container text-light">

    <h2>API Documentation</h2>

    {% if current_user.is_authenticated %}
        <form method="POST">
            <button type="submit" class="btn btn-primary my-3"
                {% if not token_expired %}disabled{% endif %}>
                Generate your Bearer Token
            </button>
        </form>

        {% if token %}
            <div class="mt-3">
                <p>Your token:</p>
                <textarea class="form-control" rows="3" readonly>{{ token }}</textarea>
                <p>Tokens expire 1 hour after generation.</p>
            </div>
        {% endif %}
    {% else %}
        <p><a href="{{ url_for('auth.login') }}">Log in</a> or <a href="{{ url_for('auth.register') }}">Register</a> to generate an API token.</p>
    {% endif %}

</div>
{% endblock %}